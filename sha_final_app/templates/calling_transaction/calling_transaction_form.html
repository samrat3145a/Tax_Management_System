{% extends 'base.html' %}

{% load static %}

{% block content %}

<!--    Navs     -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb pl-5">
      <li class="breadcrumb-item"><a href="{% url 'calling_transaction_form' %}">Create Transaction</a></li>
      <li class="breadcrumb-item"><a href="{% url 'view_query_calltrans' %}">View Transaction Details</a></li>
    </ol>
</nav>
<!--    Navs End     -->

<div class="container py-3 mt-5" style="background-color:#2196f3 ; border-radius: 25px 25px 0px 0px; color: white;">
    <h2 class="pl-5 pt-2">Calling Transaction</h2>
</div>

<div class="container p-5" style="background-color:#eceff1; border-radius: 0px 0px 25px 25px;">
    <h4>Create New Entry</h4>
    <form class="needs-validation" method="POST" novalidate>
        {% csrf_token %}
        <div class="form-row ">
            <div class="form-group col-md-12 pr-md-5">
                <label for="username"><b>Candidate ID</b></label>
                <select class="form-control" id="username" placeholder="Enter Course Id.." name="Candidate_ID">
                    {% for canid in canids %}
                    <option value="{{canid.Candidate_ID}}">{{canid.Candidate_name}} ID:{{canid.Candidate_ID}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6 pr-md-5">
                <label for="feedback"><b>Feedback</b></label>
                <input class="form-control" id="feedback" type="text" name="Feedback"
                    placeholder="Please give feedback" required>
            </div>
            <div class="form-group col-md-6 pr-md-5">
                <label for="nextdate"><b>Next Call Date</b></label>
                <input class="form-control" id="nextdate" type="date" name="Next_Call_Date"
                    placeholder="Enter the Next calling date" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6 pr-md-5">
                <label for="nexttime"><b>Next Call Time</b></label>
                <input class="form-control" id="nexttime" type="time" name="Next_Call_Time"
                    placeholder="Enter the Next calling time" required>
            </div>
            <div class="form-group col-md-6 pr-md-5">
                <label for="confirm"><b>Confirm</b></label>
                <input class="form-control" id="confirm" type="text" name="Cofirm" placeholder="Please make the confirmation"
                    required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6 pr-md-5">
                <label for="date"><b>Call Date</b></label>
                <input class="form-control" id="date" type="date" name="Call_Date" placeholder="Enter the calling date"
                    required>
            </div>
            <div class="form-group col-md-6 pr-md-5">
                <label for="time"><b>Call Time</b></label>
                <input class="form-control" id="time" type="time" name="Call_Time" placeholder="Enter the calling time"
                    required>
            </div>
        </div>
        <input type="submit" class="btn btn-primary btn-block mt-3" value="Insert Record">

        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success mt-2" role="alert">
            {{ message }}{{tnid}}
        </div>
        {% endfor %}
        {% endif %}
    </form>
</div>
<br><br>
<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>

{% endblock %}